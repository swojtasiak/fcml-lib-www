<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fcml: include/fcml_lag_assembler.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fcml
   &#160;<span id="projectnumber">1.2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fcml_lag_assembler.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Experimental multiline load-and-go assembler implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="fcml__symbols_8h_source.html">fcml_symbols.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fcml__assembler_8h_source.html">fcml_assembler.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fcml_lag_assembler.h:</div>
<div class="dyncontent">
<div class="center"><img src="fcml__lag__assembler_8h__incl.png" border="0" usemap="#include_2fcml__lag__assembler_8h" alt=""/></div>
<map name="include_2fcml__lag__assembler_8h" id="include_2fcml__lag__assembler_8h">
<area shape="rect" id="node2" href="fcml__symbols_8h.html" title="API for symbols handling. " alt="" coords="106,155,221,181"/>
<area shape="rect" id="node11" href="fcml__assembler_8h.html" title="Structures and functions declarations related to one&#45;line FCML assembler. " alt="" coords="272,80,397,107"/>
<area shape="rect" id="node3" href="fcml__lib__export_8h.html" title="Handles Win32 DLL symbols importing/exporting. " alt="" coords="182,379,303,405"/>
<area shape="rect" id="node4" href="fcml__common_8h.html" title="Definitions of common structures used by FCML components. " alt="" coords="374,229,489,256"/>
<area shape="rect" id="node10" href="fcml__errors_8h.html" title="Global error handling related declarations. " alt="" coords="201,229,300,256"/>
<area shape="rect" id="node5" href="fcml__types_8h.html" title="Types declarations. " alt="" coords="564,304,662,331"/>
<area shape="rect" id="node9" href="fcml__instructions_8h.html" title="Instruction codes and addressing modes/instruction forms. " alt="" coords="306,304,438,331"/>
<area shape="rect" id="node12" href="fcml__dialect_8h.html" title="Structures and functions related to dialects. " alt="" coords="23,229,126,256"/>
<area shape="rect" id="node13" href="fcml__optimizers_8h.html" title="API for assembler optimizers. " alt="" coords="296,155,421,181"/>
<area shape="rect" id="node14" href="fcml__choosers_8h.html" title="API for instruction choosers. " alt="" coords="496,155,615,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="fcml__lag__assembler_8h__dep__incl.png" border="0" usemap="#include_2fcml__lag__assembler_8hdep" alt=""/></div>
<map name="include_2fcml__lag__assembler_8hdep" id="include_2fcml__lag__assembler_8hdep">
<area shape="rect" id="node2" href="fcml__lag__assembler_8hpp.html" title="C++ wrapper for the Multi&#45;pass FCML assembler. " alt="" coords="5,80,213,107"/>
</map>
</div>
</div>
<p><a href="fcml__lag__assembler_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Result holder for load-and-go assembler.  <a href="structfcml__st__lag__assembler__result.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load-and-go assembler runtime context.  <a href="structfcml__st__lag__assembler__context.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a04905e7770cc61d1ddc32dfb6b966fc9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fcml__lag__assembler_8h.html#a04905e7770cc61d1ddc32dfb6b966fc9">fcml_st_lag_assembler_result</a></td></tr>
<tr class="memdesc:a04905e7770cc61d1ddc32dfb6b966fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Result holder for load-and-go assembler.  <a href="#a04905e7770cc61d1ddc32dfb6b966fc9">More...</a><br /></td></tr>
<tr class="separator:a04905e7770cc61d1ddc32dfb6b966fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83bce8680d81d71464753353bb5af63"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fcml__lag__assembler_8h.html#ab83bce8680d81d71464753353bb5af63">fcml_st_lag_assembler_context</a></td></tr>
<tr class="memdesc:ab83bce8680d81d71464753353bb5af63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load-and-go assembler runtime context.  <a href="#ab83bce8680d81d71464753353bb5af63">More...</a><br /></td></tr>
<tr class="separator:ab83bce8680d81d71464753353bb5af63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5dab8cff7f63ac301d9a736156d863c5"><td class="memItemLeft" align="right" valign="top">LIB_EXPORT <a class="el" href="fcml__errors_8h.html#a5dc52a6ee90a57e58a0760296b0c36e3">fcml_ceh_error</a> LIB_CALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fcml__lag__assembler_8h.html#a5dab8cff7f63ac301d9a736156d863c5">fcml_fn_lag_assemble</a> (<a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a> *context, const fcml_string *source_code, <a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *result)</td></tr>
<tr class="memdesc:a5dab8cff7f63ac301d9a736156d863c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Multipass load-and-go assembler.  <a href="#a5dab8cff7f63ac301d9a736156d863c5">More...</a><br /></td></tr>
<tr class="separator:a5dab8cff7f63ac301d9a736156d863c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58bb7fe6737e3bd201321c42cfff32f8"><td class="memItemLeft" align="right" valign="top">LIB_EXPORT void LIB_CALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fcml__lag__assembler_8h.html#a58bb7fe6737e3bd201321c42cfff32f8">fcml_fn_lag_assembler_result_prepare</a> (<a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *result)</td></tr>
<tr class="memdesc:a58bb7fe6737e3bd201321c42cfff32f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares reusable result holder for assembler.  <a href="#a58bb7fe6737e3bd201321c42cfff32f8">More...</a><br /></td></tr>
<tr class="separator:a58bb7fe6737e3bd201321c42cfff32f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ddd516549fa96a840694fae30144d0"><td class="memItemLeft" align="right" valign="top">LIB_EXPORT void LIB_CALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fcml__lag__assembler_8h.html#af9ddd516549fa96a840694fae30144d0">fcml_fn_lag_assembler_result_free</a> (<a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *result)</td></tr>
<tr class="memdesc:af9ddd516549fa96a840694fae30144d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans result holder.  <a href="#af9ddd516549fa96a840694fae30144d0">More...</a><br /></td></tr>
<tr class="separator:af9ddd516549fa96a840694fae30144d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Experimental multiline load-and-go assembler implementation. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2010-2020 Slawomir Wojtasiak. All rights reserved. This project is released under the GNU Lesser General Public License. </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ab83bce8680d81d71464753353bb5af63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab83bce8680d81d71464753353bb5af63">&#9670;&nbsp;</a></span>fcml_st_lag_assembler_context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a>  <a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load-and-go assembler runtime context. </p>

</div>
</div>
<a id="a04905e7770cc61d1ddc32dfb6b966fc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04905e7770cc61d1ddc32dfb6b966fc9">&#9670;&nbsp;</a></span>fcml_st_lag_assembler_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a>  <a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Result holder for load-and-go assembler. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5dab8cff7f63ac301d9a736156d863c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dab8cff7f63ac301d9a736156d863c5">&#9670;&nbsp;</a></span>fcml_fn_lag_assemble()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIB_EXPORT <a class="el" href="fcml__errors_8h.html#a5dc52a6ee90a57e58a0760296b0c36e3">fcml_ceh_error</a> LIB_CALL fcml_fn_lag_assemble </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfcml__st__lag__assembler__context.html">fcml_st_lag_assembler_context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const fcml_string *&#160;</td>
          <td class="paramname"><em>source_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Multipass load-and-go assembler. </p>
<p>Assembles all instructions given in the NULL terminated source_code array of strings. Every instruction has to be represented as one string in the source array. Like every multipass assembler implementation it passes through the source code multiple times in order to generate optimal code. Assembler also supports symbols that can be provided using symbol table available in the context. Context should be initialized the same way as in case of one line assembler. The only difference here is the symbol table itself which can be initialized using <a class="el" href="fcml__symbols_8h.html#a3275e1e9009808ba96804245c4c0c5e4" title="Allocates new symbol table. ">fcml_fn_symbol_table_alloc()</a> function. Symbols can be also declared directly in the source code and accessed through the same symbols table when processing is done (Only if you provide valid symbol table through the context). Reusable result holder has to be prepared using <a class="el" href="fcml__lag__assembler_8h.html#a58bb7fe6737e3bd201321c42cfff32f8" title="Prepares reusable result holder for assembler. ">fcml_fn_lag_assembler_result_prepare()</a> function. As long as the context and the result holder are not shared across multiple calls function is thread safe.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Assembler context. </td></tr>
    <tr><td class="paramname">source_code</td><td>NULL terminated array of the instructions. </td></tr>
    <tr><td class="paramname">result</td><td>Reusable result holder. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code or FCML_CEH_GEC_NO_ERROR. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This is an experimental implementation and it still needs some testing. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="fcml__lag__assembler_8h.html#a58bb7fe6737e3bd201321c42cfff32f8" title="Prepares reusable result holder for assembler. ">fcml_fn_lag_assembler_result_prepare</a> </dd>
<dd>
<a class="el" href="fcml__symbols_8h.html#a3275e1e9009808ba96804245c4c0c5e4" title="Allocates new symbol table. ">fcml_fn_symbol_table_alloc</a> </dd></dl>

</div>
</div>
<a id="af9ddd516549fa96a840694fae30144d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ddd516549fa96a840694fae30144d0">&#9670;&nbsp;</a></span>fcml_fn_lag_assembler_result_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIB_EXPORT void LIB_CALL fcml_fn_lag_assembler_result_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans result holder. </p>
<p>Frees all memory blocks allocated by the assembler and held inside the result holder (Instructions, errors etc.). Notice that result holder itself is not freed and can be even safety reused after call to this function. In fact this function is also called internally by assembler in order to clean result holder before reusing it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>Result holder to clean. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58bb7fe6737e3bd201321c42cfff32f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58bb7fe6737e3bd201321c42cfff32f8">&#9670;&nbsp;</a></span>fcml_fn_lag_assembler_result_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LIB_EXPORT void LIB_CALL fcml_fn_lag_assembler_result_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfcml__st__lag__assembler__result.html">fcml_st_lag_assembler_result</a> *&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares reusable result holder for assembler. </p>
<p>Every instance of <a class="el" href="structfcml__st__lag__assembler__result.html" title="Result holder for load-and-go assembler. ">fcml_st_lag_assembler_result</a> structure is reusable from the assembler's point of view, so it has to be prepared in the right way in order to allow assembler to reuse it correctly. It is up to the library user to allocate space for the holder itself. This function is only responsible for cleaning the structure correctly and preparing it for first assembling process. Notice that assembler has to clean the result holder at the beginning so you can not pass an uninitialized memory block because it can even cause a crash due to illegal memory access.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>Result holder instance to be prepared. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
